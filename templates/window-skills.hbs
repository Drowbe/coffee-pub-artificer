{{!-- Artificer Skills - Stacked panels left, details right. Badge = skill details; slot = slot details. --}}

<div class="skills-window-root">
    <!-- Header -->
    <header class="skills-window-header">
        <div class="skills-window-header-content">
            <div class="skills-window-header-icon">
                {{#if actorImg}}
                <img src="{{actorImg}}" alt="" class="skills-window-header-portrait" />
                {{else}}
                <i class="fa-solid fa-star"></i>
                {{/if}}
            </div>
            <div class="skills-window-header-title-block">
                <div class="skills-window-header-title">Artificer Skills</div>
                <div class="skills-window-header-actor">{{#if actorName}}{{actorName}}{{else}}Select a character{{/if}}</div>
            </div>
            <div class="skills-window-header-points">
                <span class="skills-window-points-label">Points</span>
                <span class="skills-window-points-value">{{availablePoints}}</span>
            </div>
        </div>
    </header>

    <div class="skills-window-body">
        <!-- Skill panels -->
            <div class="skills-window-panels">
            {{#each skillPaths}}
            <section class="skills-panel" data-skill="{{this.id}}">
                <div class="skills-panel-badge {{#if this.badgeSelected}}skills-panel-badge-selected{{/if}}" data-skill="{{this.id}}" data-action="selectSkillBadge" title="{{this.name}}">
                    <img src="{{this.img}}" alt="{{this.name}}" class="skills-panel-badge-img" />
                    <div class="skills-panel-badge-label">{{this.name}}</div>
                </div>
                <div class="skills-panel-slots">
                    {{#each this.slots}}
                    <div class="skills-slot {{#if this.selected}}skills-slot-selected{{/if}}" data-skill="{{../this.id}}" data-slot-index="{{this.slotIndex}}" title="{{this.name}}{{#if this.requirement}} â€” {{this.requirement}}{{/if}}"{{#if this.backgroundColor}} style="--slot-bg: {{this.backgroundColor}}; --slot-border: {{this.borderColor}}; background-color: {{this.backgroundColor}}; border-color: {{this.borderColor}};"{{/if}}>
                        {{#if this.iconClass}}<i class="{{this.iconClass}} skills-slot-icon"></i>{{/if}}
                        <span class="skills-slot-number">{{this.displayValue}}</span>
                    </div>
                    {{/each}}
                </div>
            </section>
            {{/each}}
        </div>

        <!-- Details pane -->
        <aside class="skills-window-details">
            <section class="skills-zone-section">
                <h3 class="skills-zone-section-title">Details</h3>
                <div class="skills-details-content">
                    {{#if selectedDetail}}
                        {{#if selectedDetail.slot}}
                        <div class="skills-detail-name">{{#if selectedDetail.slot.iconClass}}<i class="{{selectedDetail.slot.iconClass}} skills-detail-slot-icon"></i> {{/if}}{{selectedDetail.slot.name}}{{#unless selectedDetail.slot.name}}Slot {{selectedDetail.slot.index}}{{/unless}}</div>
                        {{#if selectedDetail.slot.requirement}}
                        <div class="skills-detail-requirement">{{selectedDetail.slot.requirement}}</div>
                        {{/if}}
                        {{#if selectedDetail.slot.description}}
                        <div class="skills-detail-description">{{{selectedDetail.slot.description}}}</div>
                        {{/if}}
                        {{#if selectedDetail.slot.cost}}
                        <div class="skills-detail-cost">Cost: {{selectedDetail.slot.cost}} point(s)</div>
                        {{/if}}
                        {{else}}
                        <div class="skills-detail-name">{{selectedDetail.skill.name}}</div>
                        {{#if selectedDetail.skill.description}}
                        <div class="skills-detail-description">{{{selectedDetail.skill.description}}}</div>
                        {{/if}}
                        {{/if}}
                    {{else}}
                    <div class="skills-zone-empty">Select a skill or slot to see details.</div>
                    {{/if}}
                </div>
            </section>
        </aside>
    </div>

    <!-- Action buttons --> 
    <section class="skills-window-buttons">
        <div class="skills-window-action-bar">
            <div class="skills-window-action-left"></div>
            <div class="skills-window-action-right">
                <button type="button" class="skills-window-btn-secondary" data-action="reset" title="Reset unapplied changes">
                    <i class="fa-solid fa-undo"></i> Reset
                </button>
                <button type="button" class="skills-window-btn-primary" data-action="apply" title="Apply skill point investments">
                    <i class="fa-solid fa-check"></i> Apply
                </button>
            </div>
        </div>
    </section>
</div>
